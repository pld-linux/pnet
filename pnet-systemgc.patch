--- Makefile.am~	2005-08-17 00:42:32.000000000 +0000
+++ Makefile.am	2005-11-01 14:49:05.134576856 +0000
@@ -12,14 +12,14 @@
   
 if PNET_TOOLS
 
-SUBDIRS = . $(LIBGC_DIR) $(LIBFFI_DIR) include support image dumpasm engine ilasm ildasm \
+SUBDIRS = . include support image dumpasm engine ilasm ildasm \
 		  ilalink ilsize ilnative ilheader ilfind ildd codegen cscc \
 		  resgen ilstrip ilranlib ilgac csdoc csant clrwrap samples doc tests
 
 else
 
 ## We only want to build the runtime engine.
-SUBDIRS = . $(LIBGC_DIR) $(LIBFFI_DIR) include coremul support image engine
+SUBDIRS = . include coremul support image engine
 
 endif
 
--- configure.in~	2005-08-17 00:42:32.000000000 +0000
+++ configure.in	2005-11-01 14:56:02.761087976 +0000
@@ -559,7 +559,7 @@
 dnl Set up libffi-related variables.
 AC_SUBST(FFILIBS)
 if test x$withffi = xyes ; then
-	FFILIBS='$(top_builddir)/libffi/.libs/libffi.a'
+	FFILIBS='-lffi'
 	AC_DEFINE(HAVE_LIBFFI, 1, [Define if you are using libffi])
 else
 	FFILIBS=""
@@ -569,7 +569,7 @@
 dnl Set up libgc-related variables.
 AC_SUBST(GCLIBS)
 if test x$withgc = xyes ; then
-	GCLIBS='$(top_builddir)/libgc/.libs/libgc.a'
+	GCLIBS='-lgc'
 	AC_DEFINE(HAVE_LIBGC, 1, [Define if you are using libgc])
 else
 	GCLIBS=""
@@ -613,66 +613,6 @@
 tests/Makefile
 pnet.spec])
 
-dnl Configure libffi and libgc.  We do these manually to avoid
-dnl some issues with different versions of autotools, and so that
-dnl we can pass specific options to the packages.
-if test "x$no_recursion" != "xyes"; then
-
-	export CC
-
-	dnl Figure out how to find the source directory for directories
-	dnl under $srcdir from a subdirectory of the build tree.  This is
-	dnl	different depending on whether $srcdir is absolute or relative.
-	if echo $srcdir | grep '^[~/]'; then
-		ffisrcdir=$srcdir/libffi
-		gcsrcdir=$srcdir/libgc
-	else
-		ffisrcdir=../$srcdir/libffi
-		gcsrcdir=../$srcdir/libgc
-	fi
-	if test x$withffi = xyes ; then
-		if test ! -d libffi ; then
-			mkdir libffi
-		fi
-		cd "libffi"
-		${CONFIG_SHELL-/bin/sh} ${ffisrcdir}/configure --disable-shared \
-			--enable-multilib=no \
-			--disable-dependency-tracking \
-			--host="${host}" --build="${build}" --target="${target}" \
-			--disable-fast-install --prefix="${prefix}" \
-			--exec-prefix="${exec_prefix}" --bindir="${bindir}" \
-			--sbindir="${sbindir}" --libexecdir="${libexecdir}" \
-			--datadir="${datadir}" --sysconfdir="${sysconfdir}" \
-			--sharedstatedir="${sharedstatedir}" \
-			--localstatedir="${localstatedir}" --libdir="${libdir}/pnet" \
-			--includedir="${includedir}/pnet" \
-			--oldincludedir="${oldincludedir}/pnet" --infodir="${infodir}" \
-			--mandir="${mandir}" --srcdir="${ffisrcdir}" || exit 1
-		cd ..
-	fi
-
-	if test x$withgc = xyes ; then
-		if test ! -d libgc ; then
-			mkdir libgc
-		fi
-		cd libgc
-		${CONFIG_SHELL-/bin/sh} ${gcsrcdir}/configure \
-			--enable-threads=$THREADS --host="${host}" \
-			--build="${build}" --target="${target}" --disable-fast-install \
-			--prefix="${prefix}" \
-			--exec-prefix="${exec_prefix}" --bindir="${bindir}" \
-			--sbindir="${sbindir}" --libexecdir="${libexecdir}" \
-			--datadir="${datadir}" --sysconfdir="${sysconfdir}" \
-			--sharedstatedir="${sharedstatedir}" \
-			--localstatedir="${localstatedir}" --libdir="${libdir}/pnet" \
-			--includedir="${includedir}/pnet" \
-			--oldincludedir="${oldincludedir}/pnet" \
-			--infodir="${infodir}" --mandir="${mandir}" \
-			--srcdir="${gcsrcdir}" || exit 1
-		cd ..
-	fi
-fi
-
 dnl Local variables:
 dnl tab-width: 4
 dnl end:
